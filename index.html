<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Projeto Renascer – Engine carregando JSON</title>

  <link href="https://fonts.googleapis.com/css2?family=Uncial+Antiqua&family=MedievalSharp&display=swap" rel="stylesheet">

  <style>
    :root{--bg:#05070c;--blue:#3aa6ff;--accent:#7dd3ff;--text:#eaeaea;--danger:#ff6b6b}
    *{box-sizing:border-box}
    body{margin:0;background:radial-gradient(circle,#0b1220,var(--bg));color:var(--text);font-family:'MedievalSharp',serif;display:flex;justify-content:center;align-items:center;min-height:100vh}
    .app{width:100%;max-width:420px;min-height:760px;background:rgba(10,15,30,.9);border-radius:18px;box-shadow:0 0 40px rgba(58,166,255,.35);padding:24px}
    h1,h2{text-align:center;font-family:'Uncial Antiqua',serif}
    p{text-align:center;line-height:1.5}
    .button{width:100%;margin-top:18px;padding:12px;border-radius:24px;border:none;background:linear-gradient(135deg,var(--blue),var(--accent));font-weight:bold;cursor:pointer}
    .button.danger{background:linear-gradient(135deg,var(--danger),#ffa07a)}
    textarea{width:100%;min-height:110px;border-radius:8px;border:none;padding:10px}
    .portal{width:140px;height:140px;border-radius:50%;margin:0 auto 16px;background:radial-gradient(circle,#8fd3ff,#1b4fff,#020414);box-shadow:0 0 30px #3aa6ff}
  </style>
</head>
<body>
<div class="app">
  <div id="screen"></div>
</div>

<script>
/* ========= ENGINE GENÉRICA COM JSON ========= */

let user = { premium:false };
let flow = [];
let index = 0;
const screen = document.getElementById('screen');

// JSON EMBUTIDO (no próximo passo pode virar arquivo externo)
const content = {
  "acts": [
    {"title":"Fundamentos de Dados","steps":[
      {"type":"narrative","title":"O Despertar do Olhar","text":"Antes de qualquer linguagem, o mundo já deixava rastros."},
      {"type":"content","title":"O que é um Dado","text":"Um dado é um registro bruto de algo observado."},
      {"type":"quiz","question":"Qual alternativa representa apenas um dado?","options":[{"text":"As vendas cresceram","correct":false},{"text":"150","correct":true}]}
    ]},
    {"title":"Análise de Dados","steps":[
      {"type":"content","title":"O que é Análise","text":"Investigar dados para apoiar decisões."}
    ]},
    {"title":"Python Básico","steps":[
      {"type":"content","title":"O que é Python","text":"Linguagem que transforma lógica em ação."},
      {"type":"portal","locked":true,"title":"Portal do Conhecimento Profundo","text":"A partir daqui o conteúdo é premium."}
    ]}
  ]
};

// Flatten dos atos em um único fluxo
content.acts.forEach(act => act.steps.forEach(step => flow.push(step)));

function render(){
  const step = flow[index];
  screen.innerHTML = '';

  if(step.type==='narrative'||step.type==='content'){
    screen.innerHTML = `<div><div class='portal'></div><h1>${step.title}</h1><p>${step.text}</p><button class='button' onclick='next()'>Avançar</button></div>`;
  }

  if(step.type==='quiz'){
    screen.innerHTML = `<div><h2>Desafio</h2><p>${step.question}</p>${step.options.map((o,i)=>`<label><input type='radio' name='q' value='${o.correct}'> ${o.text}</label>`).join('')}<button class='button' onclick='check()'>Confirmar</button></div>`;
  }

  if(step.type==='portal'){
    if(!user.premium){
      screen.innerHTML = `<div><div class='portal'></div><h1>${step.title}</h1><p>${step.text}</p><button class='button' onclick='unlock()'>Desbloquear Portal</button></div>`;
    } else next();
  }
}

function next(){ index++; if(index<flow.length) render(); }
function check(){ const sel=document.querySelector('input[name=q]:checked'); if(sel&&sel.value==='true'){alert('Correto');next();} else alert('Tente novamente'); }
function unlock(){ alert('Simulação de assinatura'); user.premium=true; next(); }

render();
</script>
</body>
</html>
